(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-64d5d635"],{"40d6":function(e,t,a){"use strict";var l=a("b964"),o=a.n(l);o.a},"8e92":function(e,t,a){},a15b:function(e,t,a){"use strict";var l=a("23e7"),o=a("44ad"),n=a("fc6a"),s=a("a640"),i=[].join,r=o!=Object,c=s("join",",");l({target:"Array",proto:!0,forced:r||!c},{join:function(e){return i.call(n(this),void 0===e?",":e)}})},b964:function(e,t,a){},ccd7:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("AdUnit",{attrs:{title:"书签管理","api-name":"bookmark","default-data":e.defaultData,"default-query":e.defaultQuery},scopedSlots:e._u([{key:"queryForm",fn:function(t){return[a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{attrs:{placeholder:"名称"},model:{value:t.queryData.name,callback:function(a){e.$set(t.queryData,"name",a)},expression:"props.queryData.name"}})],1),a("el-form-item",{attrs:{label:"类型"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.queryData.type,callback:function(a){e.$set(t.queryData,"type",a)},expression:"props.queryData.type"}},e._l(e.selectOps,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)]}},{key:"modelForm",fn:function(t){return[a("el-row",[a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{attrs:{placeholder:"名称"},model:{value:t.formData.name,callback:function(a){e.$set(t.formData,"name",a)},expression:"props.formData.name"}})],1),a("el-form-item",{attrs:{label:"链接"}},[a("el-input",{attrs:{placeholder:"链接"},model:{value:t.formData.link,callback:function(a){e.$set(t.formData,"link",a)},expression:"props.formData.link"}})],1)],1),a("el-row",[a("el-form-item",{attrs:{label:"简述"}},[a("el-input",{attrs:{placeholder:"简述"},model:{value:t.formData.desc,callback:function(a){e.$set(t.formData,"desc",a)},expression:"props.formData.desc"}})],1),a("el-form-item",{attrs:{label:"图标"}},[a("el-input",{attrs:{placeholder:"图标",disabled:""},model:{value:t.formData.icon,callback:function(a){e.$set(t.formData,"icon",a)},expression:"props.formData.icon"}})],1)],1),a("el-row",[a("el-form-item",{attrs:{label:"分类"}},[a("el-input",{attrs:{placeholder:"分类"},model:{value:t.formData.cats,callback:function(a){e.$set(t.formData,"cats",a)},expression:"props.formData.cats"}})],1),a("el-form-item",{attrs:{label:"类型"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.formData.type,callback:function(a){e.$set(t.formData,"type",a)},expression:"props.formData.type"}},e._l(e.selectOps,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),a("el-row",[a("el-form-item",{attrs:{label:"是否翻墙"}},[a("el-switch",{attrs:{"active-value":"1","inactive-value":"0","active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:t.formData.outWall,callback:function(a){e.$set(t.formData,"outWall",a)},expression:"props.formData.outWall"}})],1),a("el-form-item",{attrs:{label:"是否消化"}},[a("el-switch",{attrs:{"active-value":"1","inactive-value":"0","active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:t.formData.digested,callback:function(a){e.$set(t.formData,"digested",a)},expression:"props.formData.digested"}})],1)],1),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{placeholder:"备注"},model:{value:t.formData.remark,callback:function(a){e.$set(t.formData,"remark",a)},expression:"props.formData.remark"}})],1)]}}])},[a("template",{slot:"unitTable"},[a("el-table-column",{attrs:{prop:"link",label:"链接","show-tooltip-when-overflow":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("a",{attrs:{href:t.row.link,target:"_blank"}},[e._v(e._s(t.row.link))])]}}])}),a("el-table-column",{attrs:{prop:"desc",label:"简述","show-tooltip-when-overflow":""}}),a("el-table-column",{attrs:{prop:"icon",label:"图标"}}),a("el-table-column",{attrs:{prop:"type",label:"类型",filters:e.selectOps,"filter-method":function(e,t,a){return t[a["property"]]===e||!e}},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:e.typeColor[t.row.type]}},[e._v(e._s(t.row.type))])]}}])}),a("el-table-column",{attrs:{prop:"cats",label:"类目"}}),a("el-table-column",{attrs:{prop:"remark",label:"备注"}}),a("el-table-column",{attrs:{prop:"digested",label:"是否消化"},scopedSlots:e._u([{key:"default",fn:function(e){return[1==e.row.digested?a("i",{staticClass:"el-icon-check",staticStyle:{color:"#13ce66"}}):a("i",{staticClass:"el-icon-close",staticStyle:{color:"#ff4949"}})]}}])}),a("el-table-column",{attrs:{prop:"outWall",label:"是否翻墙"},scopedSlots:e._u([{key:"default",fn:function(e){return[1==e.row.outWall?a("i",{staticClass:"el-icon-check",staticStyle:{color:"#13ce66"}}):a("i",{staticClass:"el-icon-close",staticStyle:{color:"#ff4949"}})]}}])})],1)],2)},o=[],n=a("f592"),s={name:"AdBookmark",components:{AdUnit:n["a"]},data:function(){return{defaultData:{name:"",desc:"不可描述",link:"",icon:"default.png",cats:"unclassified",type:"Digest",remark:"",digested:"0",outWall:"0"},defaultQuery:{name:"",type:""},selectOps:[{label:"Empty",value:"",text:"All"},{label:"Daily",value:"Daily",text:"Daily"},{label:"Devil",value:"Devil",text:"Devil"},{label:"Digest",value:"Digest",text:"Digest"}],typeColor:{Daily:"default",Devil:"success",Digest:"warning"}}}},i=s,r=a("2877"),c=Object(r["a"])(i,l,o,!1,null,null,null);t["default"]=c.exports},d9cb:function(e,t,a){"use strict";var l=a("8e92"),o=a.n(l);o.a},f592:function(e,t,a){"use strict";var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"meteor-curd-wrapper"},[a("el-divider",{attrs:{"content-position":"left"}},[e._v(e._s(e.title))]),a("el-collapse",{attrs:{accordion:""}},[a("el-collapse-item",{attrs:{title:"Search",name:"Search"}},[a("el-form",{attrs:{inline:!0,model:e.queryData,size:"small"}},[e._t("queryForm",null,{queryData:e.queryData}),a("el-form-item",{attrs:{label:"操作"}},[a("el-button",{on:{click:e._handlePage}},[e._v("查询")]),a("el-button",{on:{click:e._handleRefresh}},[e._v("重置")])],1)],2)],1),a("el-collapse-item",{attrs:{title:"More",name:"More"}},[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e._handleEdit(null)}}},[e._v("新建")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e._handleDelete(null)}}},[e._v("删除")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:e._handleRefresh}},[e._v("重置")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:e._handleImport}},[e._v("导入")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:e._handleExport}},[e._v("导出")])],1)],1),a("el-pagination",{staticStyle:{margin:"1rem 0"},attrs:{"current-page":e.pageOps.pageNo,"page-sizes":[10,50,100,500],"page-size":e.pageOps.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pageOps.total},on:{"size-change":e._handleSizeChange,"current-change":e._handleCurrentChange}}),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{stripe:"",data:e.tableData},on:{"selection-change":function(t){e.tableSelection=t}}},[a("el-table-column",{attrs:{fixed:"left",type:"selection",width:"50"}}),a("el-table-column",{attrs:{prop:"name",label:"名称",sortable:"",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return a("p",{staticClass:"curd-cell"},[e.actionList.indexOf("edit")>-1?a("span",{staticClass:"crud-edit",attrs:{title:"模型编辑"},on:{click:function(a){return e._handleEdit(t.row)}}},[a("i",{staticClass:"el-icon-edit"}),e._v(e._s(t.row.name))]):e._e(),e.actionList.indexOf("mdEdit")>-1?a("span",{staticClass:"crud-mdEdit",attrs:{title:"文章编辑"},on:{click:function(a){return e._handleMdEdit(t.row)}}},[a("i",{staticClass:"el-icon-edit-outline"})]):e._e(),e.actionList.indexOf("delete")>-1?a("span",{staticClass:"crud-delete",attrs:{title:"删除"},on:{click:function(a){return e._handleDelete(t.row._id)}}},[a("i",{staticClass:"el-icon-delete"})]):e._e()])}}])}),e._t("unitTable"),a("el-table-column",{attrs:{prop:"_updated",label:"最后更新",sortable:"","show-tooltip-when-overflow":""}}),a("el-table-column",{attrs:{prop:"_created",label:"创建时间",sortable:"","show-tooltip-when-overflow":""}})],2),a("el-dialog",{attrs:{title:e.dialogName,visible:e.editShow,fullscreen:e.fullscreen,width:"max-content"},on:{"update:visible":function(t){e.editShow=t},closed:e._handleClose}},[a("transition",{attrs:{name:"el-fade-in"}},[e.editShow&&"Model"===e.dialogName?[a("el-form",{attrs:{inline:"",model:e.formData,size:"small"}},[e._t("modelForm",null,{formData:e.formData}),a("div",{staticStyle:{"text-align":"right"}},[a("el-button",{attrs:{type:"success"},on:{click:e._handleSubmit}},[e._v("Submit")])],1)],2)]:e.editShow&&"MarkDown"===e.dialogName?[a("section",{staticClass:"meteor-adBlog-markDown meteor-blog-wrapper"},[a("mavon-editor",{on:{save:e._handleMdSubmit,helpToggle:function(t){return e._handleNoMeaning("虽点帮助，然并卵")}},model:{value:e.blogRow.content,callback:function(t){e.$set(e.blogRow,"content",t)},expression:"blogRow.content"}})],1)]:e._e()],2)],1)],1)},o=[],n=(a("a15b"),a("d81d"),a("5530")),s={name:"AdUnit",props:{title:{type:String,default:""},apiName:{type:String,default:""},actionList:{type:String,default:"edit,delete"},defaultData:{type:Object,default:null},defaultQuery:{type:Object,default:null},pageDataTran:{type:Function,default:function(e){return e}}},data:function(){return{tableData:[],tableSelection:[],tableLoading:!1,editShow:!1,fullscreen:!1,dialogName:"Model",pageOps:{total:1,pageSize:10,pageNo:1},formData:null,queryData:null,blogRow:{_id:"",content:""}}},created:function(){this.formData=Object(n["a"])({},this.defaultData),this.queryData=Object(n["a"])({},this.defaultQuery)},mounted:function(){this._handlePage()},methods:{_handlePage:function(){if(this.$api[this.apiName]){var e=this;this.tableLoading=!0,this.$api[this.apiName].page(Object(n["a"])({confModel:this.queryData},this.pageOps)).then((function(t){var a=t.data,l=a.success,o=a.result,n=a.total;l?(e.tableData=e.pageDataTran(o),e.pageOps.total=n):(e.tableData=[],e.pageOps.total=0,e.$message.error(t.data.msg)),e.tableLoading=!1})).catch((function(t){console.log(t),e.tableData=[],e.pageOps.total=0,e.$message.error(t.msg),e.tableLoading=!1}))}},_handleRefresh:function(){this.pageOps={total:1,pageSize:10,pageNo:1},this.editShow=!1,this.formData=Object(n["a"])({},this.defaultData),this.queryData=Object(n["a"])({},this.defaultQuery),this._handlePage()},_handleSizeChange:function(e){this.pageOps.pageNo=1,this.pageOps.pageSize=e,this._handlePage()},_handleCurrentChange:function(e){this.pageOps.pageNo=e,this._handlePage()},_handleEdit:function(e){this.formData=Object(n["a"])({},this.defaultData,{},e),this.dialogName="Model",this.fullscreen=!1,this.editShow=!0},_handleClose:function(){this.formData=Object(n["a"])({},this.defaultData),this.blogRow={_id:"",content:""}},_handleSubmit:function(){var e=this;e.$api[this.apiName].save(this.formData).then((function(t){t.data.success?(e.$message.success("保存成功"),e._handleRefresh()):e.$message.error(t.data.msg)}))},_handleMdEdit:function(e){var t=this;this.$api.blog.read(e._id).then((function(e){var a=e.data,l=a.success,o=a.result;l?(t.blogRow._id=o[0]._id,t.blogRow.content=o[0].content,t.dialogName="MarkDown",t.fullscreen=!0,t.editShow=!0):t.$message.error(e.data.msg)})).catch((function(e){t.$message.error(e.message)}))},_handleMdSubmit:function(e){var t=this;this.$api.blog.write({_id:this.blogRow._id,content:e}).then((function(e){e.data.success?t.$message.success(e.data.msg):t.$message.error(e.data.msg)})).catch((function(e){t.$message.error(e.message)}))},_handleNoMeaning:function(e){this.$message.info(e)},_handleDelete:function(e){var t=this,a=this;!e&&this.tableSelection.length<=0?this.$message.warning("请选择行"):this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var l=e||t.tableSelection.map((function(e){return e._id})).join(",");a.$api[t.apiName].delete(l).then((function(e){e.data.success?(a.$message.success("删除成功"),a._handleRefresh()):a.$message.error(e.data.msg)}))})).catch((function(){a.$message({type:"info",message:"已取消删除"})}))},_handleImport:function(){this.$message.info("_handleImport")},_handleExport:function(){this.$message.info("_handleExport")}}},i=s,r=(a("40d6"),a("d9cb"),a("2877")),c=Object(r["a"])(i,l,o,!1,null,"6aa71bce",null);t["a"]=c.exports}}]);
//# sourceMappingURL=chunk-64d5d635.3e22a1b1.js.map