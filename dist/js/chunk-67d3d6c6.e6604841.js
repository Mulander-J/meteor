(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-67d3d6c6"],{"0c6c":function(e,t,a){},"547d":function(e,t,a){"use strict";var l=a("0c6c"),n=a.n(l);n.a},"56d8":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("AdUnit",{attrs:{title:"博客管理","api-name":"blog",pageDataTran:e._pageDataTran,"default-data":e.defaultData,"default-query":e.defaultQuery,actionList:"edit,mdEdit,delete"},scopedSlots:e._u([{key:"queryForm",fn:function(t){return[a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{attrs:{placeholder:"名称"},model:{value:t.queryData.name,callback:function(a){e.$set(t.queryData,"name",a)},expression:"props.queryData.name"}})],1),a("el-form-item",{attrs:{label:"类目"}},[a("elTreeSelect",{attrs:{options:e.selectTreeOps.options,props:e.selectTreeOps.props},on:{getValue:function(e){t.queryData.cats=e}},model:{value:t.queryData.cats,callback:function(a){e.$set(t.queryData,"cats",a)},expression:"props.queryData.cats"}})],1),a("el-form-item",{attrs:{label:"标签"}},[a("el-select",{attrs:{multiple:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"标签"},model:{value:t.queryData.tags,callback:function(a){e.$set(t.queryData,"tags",a)},expression:"props.queryData.tags"}},e._l(e.selectOps,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)]}},{key:"modelForm",fn:function(t){return[a("el-row",[a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{attrs:{placeholder:"名称"},model:{value:t.formData.name,callback:function(a){e.$set(t.formData,"name",a)},expression:"props.formData.name"}})],1),a("el-form-item",{attrs:{label:"撰写"}},[a("el-input",{attrs:{placeholder:"撰写",readonly:""},model:{value:t.formData.writer,callback:function(a){e.$set(t.formData,"writer",a)},expression:"props.formData.writer"}})],1)],1),a("el-row",[a("el-form-item",{attrs:{label:"是否显示"}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:t.formData.isShow,callback:function(a){e.$set(t.formData,"isShow",a)},expression:"props.formData.isShow"}})],1),a("el-form-item",{attrs:{label:"是否原创"}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:t.formData.isOriginal,callback:function(a){e.$set(t.formData,"isOriginal",a)},expression:"props.formData.isOriginal"}})],1)],1),a("transition",{attrs:{name:"el-fade-in"}},[a("el-row",{directives:[{name:"show",rawName:"v-show",value:!t.formData.isOriginal,expression:"!props.formData.isOriginal"}]},[a("el-form-item",{attrs:{label:"作者"}},[a("el-input",{attrs:{placeholder:"作者"},model:{value:t.formData.author,callback:function(a){e.$set(t.formData,"author",a)},expression:"props.formData.author"}})],1),a("el-form-item",{attrs:{label:"转载"}},[a("el-input",{attrs:{placeholder:"转载"},model:{value:t.formData.reLink,callback:function(a){e.$set(t.formData,"reLink",a)},expression:"props.formData.reLink"}})],1)],1)],1),a("el-row",[a("el-form-item",{attrs:{label:"类目"}},[a("elTreeSelect",{attrs:{options:e.selectTreeOps.options,props:e.selectTreeOps.props},on:{getValue:function(e){t.formData.cats._id=e}},model:{value:t.formData.cats._id,callback:function(a){e.$set(t.formData.cats,"_id",a)},expression:"props.formData.cats._id"}})],1),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{placeholder:"备注"},model:{value:t.formData.remark,callback:function(a){e.$set(t.formData,"remark",a)},expression:"props.formData.remark"}})],1)],1),a("el-row",[a("el-form-item",{attrs:{label:"标签"}},[a("el-select",{attrs:{multiple:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"标签"},model:{value:t.formData.tags,callback:function(a){e.$set(t.formData,"tags",a)},expression:"props.formData.tags"}},e._l(e.selectOps,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1)]}}])},[a("template",{slot:"unitTable"},[a("el-table-column",{attrs:{prop:"cats",label:"类目"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.cats.name))])]}}])}),a("el-table-column",{attrs:{prop:"author",label:"作者"}}),a("el-table-column",{attrs:{prop:"thumb",label:"点赞数"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.thumb.length))])]}}])}),a("el-table-column",{attrs:{prop:"visitNo",label:"浏览数"}}),a("el-table-column",{attrs:{prop:"isTop",label:"是否原创",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[1==e.row.isOriginal?a("i",{staticClass:"el-icon-check",staticStyle:{color:"#13ce66"}}):a("i",{staticClass:"el-icon-close",staticStyle:{color:"#ff4949"}})]}}])}),a("el-table-column",{attrs:{prop:"isShow",label:"是否显示",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[1==e.row.isShow?a("i",{staticClass:"el-icon-check",staticStyle:{color:"#13ce66"}}):a("i",{staticClass:"el-icon-close",staticStyle:{color:"#ff4949"}})]}}])}),a("el-table-column",{attrs:{prop:"remark",label:"备注"}})],1)],2)},n=[],r=(a("d81d"),a("b0c0"),a("f592")),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-select",{attrs:{value:e.valueTitle,clearable:e.clearable},on:{clear:e.clearHandle}},[a("el-option",{attrs:{value:e.valueTitle,label:e.valueTitle}},[a("el-tree",{ref:"selectTree",attrs:{id:"tree-option",accordion:e.accordion,data:e.options,props:e.props,"node-key":e.props.value,"default-expanded-keys":e.defaultExpandedKey},on:{"node-click":e.handleNodeClick}})],1)],1)},s=[],i=(a("4160"),a("a9e3"),a("159b"),{name:"el-tree-select",props:{props:{type:Object,default:function(){return{value:"id",label:"title",children:"children"}}},options:{type:Array,default:function(){return[]}},value:{type:[String,Number],default:function(){return null}},clearable:{type:Boolean,default:function(){return!0}},accordion:{type:Boolean,default:function(){return!0}}},data:function(){return{valueId:this.value,valueTitle:"",defaultExpandedKey:[]}},mounted:function(){this.initHandle()},methods:{initHandle:function(){this.valueId?(this.valueTitle=this.$refs.selectTree.getNode(this.valueId).data[this.props.label],this.$refs.selectTree.setCurrentKey(this.valueId),this.defaultExpandedKey=[this.valueId]):this.clearHandle(),this.$nextTick((function(){var e=document.querySelectorAll(".el-scrollbar .el-select-dropdown__wrap")[0],t=document.querySelectorAll(".el-scrollbar .el-scrollbar__bar");e.style.cssText="margin: 0px; max-height: none; overflow: hidden;",t.forEach((function(e){return e.style.width=0}))}))},handleNodeClick:function(e){this.valueTitle=e[this.props.label],this.valueId=e[this.props.value],this.$emit("getValue",this.valueId),this.defaultExpandedKey=[]},clearHandle:function(){this.valueTitle="",this.valueId=null,this.defaultExpandedKey=[],this.clearSelected(),this.$emit("getValue",null)},clearSelected:function(){var e=document.querySelectorAll("#tree-option .el-tree-node");e.forEach((function(e){return e.classList.remove("is-current")}))}},watch:{value:function(){this.valueId=this.value,this.initHandle()}}}),c=i,u=(a("547d"),a("2877")),d=Object(u["a"])(c,o,s,!1,null,"aa3705be",null),p=d.exports,f={name:"AdBlog",components:{AdUnit:r["a"],elTreeSelect:p},data:function(){return{defaultData:{name:"",tags:[],cats:{_id:"",name:""},content:"",writer:"Mulander",author:"",reLink:"",isOriginal:1,isShow:0,visitNo:0,thumb:[],remark:""},defaultQuery:{name:"",cats:null,tags:[]},selectOps:[],selectTreeOps:{props:{value:"_id",label:"name",children:"children"},options:[],constDefault:""}}},mounted:function(){this._getSelectOps(),this._getTreeOps()},methods:{_getSelectOps:function(){var e=this;this.$api.tags.list({}).then((function(t){var a=t.data,l=a.success,n=a.result;l?e.selectOps=n.map((function(e){return e.value=e.name,e.label=e.name,e})):(e.selectOps=[],e.$message.error(t.data.msg))})).catch((function(t){e.$message.error(t.message)}))},_getTreeOps:function(){var e=this;this.$api.cats.list({}).then((function(t){var a=t.data,l=a.success,n=a.result;l?e.selectTreeOps.options=e.$util._toTreeData(n,{id:"_id",parentId:"parentId",firstParent:"######",isSort:!0,sort:"sort"}):(e.selectTreeOps.options=[],e.$message.error(t.data.msg))})).catch((function(t){e.selectTreeOps.options=[],e.$message.error(t.message)}))},_pageDataTran:function(e){return e.map((function(e){return e.cats=e.cats||{name:"UnClassified",_id:""},e}))}}},m=f,h=Object(u["a"])(m,l,n,!1,null,"6e580258",null);t["default"]=h.exports},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,a){var l=a("1d80"),n=a("5899"),r="["+n+"]",o=RegExp("^"+r+r+"*"),s=RegExp(r+r+"*$"),i=function(e){return function(t){var a=String(l(t));return 1&e&&(a=a.replace(o,"")),2&e&&(a=a.replace(s,"")),a}};e.exports={start:i(1),end:i(2),trim:i(3)}},7156:function(e,t,a){var l=a("861d"),n=a("d2bb");e.exports=function(e,t,a){var r,o;return n&&"function"==typeof(r=t.constructor)&&r!==a&&l(o=r.prototype)&&o!==a.prototype&&n(e,o),e}},a15b:function(e,t,a){"use strict";var l=a("23e7"),n=a("44ad"),r=a("fc6a"),o=a("a640"),s=[].join,i=n!=Object,c=o("join",",");l({target:"Array",proto:!0,forced:i||!c},{join:function(e){return s.call(r(this),void 0===e?",":e)}})},a9e3:function(e,t,a){"use strict";var l=a("83ab"),n=a("da84"),r=a("94ca"),o=a("6eeb"),s=a("5135"),i=a("c6b6"),c=a("7156"),u=a("c04e"),d=a("d039"),p=a("7c73"),f=a("241c").f,m=a("06cf").f,h=a("9bf2").f,g=a("58a8").trim,b="Number",v=n[b],_=v.prototype,y=i(p(_))==b,D=function(e){var t,a,l,n,r,o,s,i,c=u(e,!1);if("string"==typeof c&&c.length>2)if(c=g(c),t=c.charCodeAt(0),43===t||45===t){if(a=c.charCodeAt(2),88===a||120===a)return NaN}else if(48===t){switch(c.charCodeAt(1)){case 66:case 98:l=2,n=49;break;case 79:case 111:l=8,n=55;break;default:return+c}for(r=c.slice(2),o=r.length,s=0;s<o;s++)if(i=r.charCodeAt(s),i<48||i>n)return NaN;return parseInt(r,l)}return+c};if(r(b,!v(" 0o1")||!v("0b1")||v("+0x1"))){for(var w,S=function(e){var t=arguments.length<1?0:e,a=this;return a instanceof S&&(y?d((function(){_.valueOf.call(a)})):i(a)!=b)?c(new v(D(t)),a,S):D(t)},k=l?f(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),O=0;k.length>O;O++)s(v,w=k[O])&&!s(S,w)&&h(S,w,m(v,w));S.prototype=_,_.constructor=S,o(n,b,S)}},b69c:function(e,t,a){},ddb4:function(e,t,a){"use strict";var l=a("b69c"),n=a.n(l);n.a},f592:function(e,t,a){"use strict";var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"meteor-curd-wrapper"},[a("el-divider",{attrs:{"content-position":"left"}},[e._v(e._s(e.title))]),a("el-collapse",{attrs:{accordion:""}},[a("el-collapse-item",{attrs:{title:"Search",name:"Search"}},[a("el-form",{attrs:{inline:!0,model:e.queryData,size:"small"}},[e._t("queryForm",null,{queryData:e.queryData}),a("el-form-item",{attrs:{label:"操作"}},[a("el-button",{on:{click:e._handlePage}},[e._v("查询")]),a("el-button",{on:{click:e._handleRefresh}},[e._v("重置")])],1)],2)],1),a("el-collapse-item",{attrs:{title:"More",name:"More"}},[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e._handleEdit(null)}}},[e._v("新建")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e._handleDelete(null)}}},[e._v("删除")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:e._handleRefresh}},[e._v("重置")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:e._handleImport}},[e._v("导入")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:e._handleExport}},[e._v("导出")])],1)],1),a("el-pagination",{staticStyle:{margin:"1rem 0"},attrs:{"current-page":e.pageOps.pageNo,"page-sizes":[10,50,100,500],"page-size":e.pageOps.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pageOps.total},on:{"size-change":e._handleSizeChange,"current-change":e._handleCurrentChange}}),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{stripe:"",data:e.tableData},on:{"selection-change":function(t){e.tableSelection=t}}},[a("el-table-column",{attrs:{fixed:"left",type:"selection",width:"50"}}),a("el-table-column",{attrs:{prop:"name",label:"名称",sortable:"",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return a("p",{staticClass:"curd-cell"},[e.actionList.indexOf("edit")>-1?a("span",{staticClass:"crud-edit",attrs:{title:"模型编辑"},on:{click:function(a){return e._handleEdit(t.row)}}},[a("i",{staticClass:"el-icon-edit"}),e._v(e._s(t.row.name))]):e._e(),e.actionList.indexOf("mdEdit")>-1?a("span",{staticClass:"crud-mdEdit",attrs:{title:"文章编辑"},on:{click:function(a){return e._handleMdEdit(t.row)}}},[a("i",{staticClass:"el-icon-edit-outline"})]):e._e(),e.actionList.indexOf("delete")>-1?a("span",{staticClass:"crud-delete",attrs:{title:"删除"},on:{click:function(a){return e._handleDelete(t.row._id)}}},[a("i",{staticClass:"el-icon-delete"})]):e._e()])}}])}),e._t("unitTable"),a("el-table-column",{attrs:{prop:"_updated",label:"最后更新",sortable:"","show-tooltip-when-overflow":""}}),a("el-table-column",{attrs:{prop:"_created",label:"创建时间",sortable:"","show-tooltip-when-overflow":""}})],2),a("el-dialog",{attrs:{title:e.dialogName,visible:e.editShow,fullscreen:e.fullscreen,width:"max-content"},on:{"update:visible":function(t){e.editShow=t},closed:e._handleClose}},[a("transition",{attrs:{name:"el-fade-in"}},[e.editShow&&"Model"===e.dialogName?[a("el-form",{attrs:{inline:"",model:e.formData,size:"small"}},[e._t("modelForm",null,{formData:e.formData}),a("div",{staticStyle:{"text-align":"right"}},[a("el-button",{attrs:{type:"success"},on:{click:e._handleSubmit}},[e._v("Submit")])],1)],2)]:e.editShow&&"MarkDown"===e.dialogName?[a("section",{staticClass:"meteor-adBlog-markDown meteor-blog-wrapper"},[a("mavon-editor",{on:{save:e._handleMdSubmit,helpToggle:function(t){return e._handleNoMeaning("虽点帮助，然并卵")}},model:{value:e.blogRow.content,callback:function(t){e.$set(e.blogRow,"content",t)},expression:"blogRow.content"}})],1)]:e._e()],2)],1)],1)},n=[],r=(a("a15b"),a("d81d"),a("5530")),o={name:"AdUnit",props:{title:{type:String,default:""},apiName:{type:String,default:""},actionList:{type:String,default:"edit,delete"},defaultData:{type:Object,default:null},defaultQuery:{type:Object,default:null},pageDataTran:{type:Function,default:function(e){return e}}},data:function(){return{tableData:[],tableSelection:[],tableLoading:!1,editShow:!1,fullscreen:!1,dialogName:"Model",pageOps:{total:1,pageSize:10,pageNo:1},formData:null,queryData:null,blogRow:{_id:"",content:""}}},created:function(){this.formData=Object(r["a"])({},this.defaultData),this.queryData=Object(r["a"])({},this.defaultQuery)},mounted:function(){this._handlePage()},methods:{_handlePage:function(){if(this.$api[this.apiName]){var e=this;this.tableLoading=!0,this.$api[this.apiName].page(Object(r["a"])({confModel:this.queryData},this.pageOps)).then((function(t){var a=t.data,l=a.success,n=a.result,r=a.total;l?(e.tableData=e.pageDataTran(n),e.pageOps.total=r):(e.tableData=[],e.pageOps.total=0,e.$message.error(t.data.msg)),e.tableLoading=!1})).catch((function(t){console.log(t),e.tableData=[],e.pageOps.total=0,e.$message.error(t.msg),e.tableLoading=!1}))}},_handleRefresh:function(){this.pageOps={total:1,pageSize:10,pageNo:1},this.editShow=!1,this.formData=Object(r["a"])({},this.defaultData),this.queryData=Object(r["a"])({},this.defaultQuery),this._handlePage()},_handleSizeChange:function(e){this.pageOps.pageNo=1,this.pageOps.pageSize=e,this._handlePage()},_handleCurrentChange:function(e){this.pageOps.pageNo=e,this._handlePage()},_handleEdit:function(e){this.formData=Object(r["a"])({},this.defaultData,{},e),this.dialogName="Model",this.fullscreen=!1,this.editShow=!0},_handleClose:function(){this.formData=Object(r["a"])({},this.defaultData),this.blogRow={_id:"",content:""}},_handleSubmit:function(){var e=this;e.$api[this.apiName].save(this.formData).then((function(t){t.data.success?(e.$message.success("保存成功"),e._handleRefresh()):e.$message.error(t.data.msg)}))},_handleMdEdit:function(e){var t=this;this.$api.blog.read(e._id).then((function(e){var a=e.data,l=a.success,n=a.result;l?(t.blogRow._id=n[0]._id,t.blogRow.content=n[0].content,t.dialogName="MarkDown",t.fullscreen=!0,t.editShow=!0):t.$message.error(e.data.msg)})).catch((function(e){t.$message.error(e.message)}))},_handleMdSubmit:function(e){var t=this;this.$api.blog.write({_id:this.blogRow._id,content:e}).then((function(e){e.data.success?t.$message.success(e.data.msg):t.$message.error(e.data.msg)})).catch((function(e){t.$message.error(e.message)}))},_handleNoMeaning:function(e){this.$message.info(e)},_handleDelete:function(e){var t=this,a=this;!e&&this.tableSelection.length<=0?this.$message.warning("请选择行"):this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var l=e||t.tableSelection.map((function(e){return e._id})).join(",");a.$api[t.apiName].delete(l).then((function(e){e.data.success?(a.$message.success("删除成功"),a._handleRefresh()):a.$message.error(e.data.msg)}))})).catch((function(){a.$message({type:"info",message:"已取消删除"})}))},_handleImport:function(){this.$message.info("_handleImport")},_handleExport:function(){this.$message.info("_handleExport")}}},s=o,i=(a("ddb4"),a("2877")),c=Object(i["a"])(s,l,n,!1,null,"22f9cede",null);t["a"]=c.exports}}]);
//# sourceMappingURL=chunk-67d3d6c6.e6604841.js.map