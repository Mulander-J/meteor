(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ff19f0d0"],{"59b8":function(t,e,a){"use strict";var n=a("e983"),i=a.n(n);i.a},"8e92":function(t,e,a){},a15b:function(t,e,a){"use strict";var n=a("23e7"),i=a("44ad"),o=a("fc6a"),l=a("a640"),s=[].join,r=i!=Object,c=l("join",",");n({target:"Array",proto:!0,forced:r||!c},{join:function(t){return s.call(o(this),void 0===t?",":t)}})},b1cc:function(t,e,a){},d9cb:function(t,e,a){"use strict";var n=a("8e92"),i=a.n(n);i.a},e983:function(t,e,a){},f592:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"meteor-curd-wrapper"},[a("el-divider",{attrs:{"content-position":"left"}},[t._v(t._s(t.title))]),a("el-collapse",{attrs:{accordion:""}},[a("el-collapse-item",{attrs:{title:"Search",name:"Search"}},[a("el-form",{attrs:{inline:!0,model:t.queryData,size:"small"}},[t._t("queryForm",null,{queryData:t.queryData}),a("el-form-item",{attrs:{label:"操作"}},[a("el-button",{on:{click:t._handlePage}},[t._v("查询")]),a("el-button",{on:{click:t._handleRefresh}},[t._v("重置")])],1)],2)],1),a("el-collapse-item",{attrs:{title:"More",name:"More"}},[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){return t._handleEdit(null)}}},[t._v("新建")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){return t._handleDelete(null)}}},[t._v("删除")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:t._handleRefresh}},[t._v("重置")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:t._handleImport}},[t._v("导入")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:t._handleExport}},[t._v("导出")])],1)],1),a("el-pagination",{staticStyle:{margin:"1rem 0"},attrs:{"current-page":t.pageOps.pageNo,"page-sizes":[10,50,100,500],"page-size":t.pageOps.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.pageOps.total},on:{"size-change":t._handleSizeChange,"current-change":t._handleCurrentChange}}),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableLoading,expression:"tableLoading"}],attrs:{stripe:"",data:t.tableData},on:{"selection-change":function(e){t.tableSelection=e}}},[a("el-table-column",{attrs:{fixed:"left",type:"selection",width:"50"}}),a("el-table-column",{attrs:{prop:"name",label:"名称",sortable:"",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return a("p",{staticClass:"curd-cell"},[t.actionList.indexOf("edit")>-1?a("span",{staticClass:"crud-edit",attrs:{title:"模型编辑"},on:{click:function(a){return t._handleEdit(e.row)}}},[a("i",{staticClass:"el-icon-edit"}),t._v(t._s(e.row.name))]):t._e(),t.actionList.indexOf("mdEdit")>-1?a("span",{staticClass:"crud-mdEdit",attrs:{title:"文章编辑"},on:{click:function(a){return t._handleMdEdit(e.row)}}},[a("i",{staticClass:"el-icon-edit-outline"})]):t._e(),t.actionList.indexOf("delete")>-1?a("span",{staticClass:"crud-delete",attrs:{title:"删除"},on:{click:function(a){return t._handleDelete(e.row._id)}}},[a("i",{staticClass:"el-icon-delete"})]):t._e()])}}])}),t._t("unitTable"),a("el-table-column",{attrs:{prop:"_updated",label:"最后更新",sortable:"","show-tooltip-when-overflow":""}}),a("el-table-column",{attrs:{prop:"_created",label:"创建时间",sortable:"","show-tooltip-when-overflow":""}})],2),a("el-dialog",{attrs:{title:t.dialogName,visible:t.editShow,fullscreen:t.fullscreen,width:"max-content"},on:{"update:visible":function(e){t.editShow=e},closed:t._handleClose}},[a("transition",{attrs:{name:"el-fade-in"}},[t.editShow&&"Model"===t.dialogName?[a("el-form",{attrs:{inline:"",model:t.formData,size:"small"}},[t._t("modelForm",null,{formData:t.formData}),a("div",{staticStyle:{"text-align":"right"}},[a("el-button",{attrs:{type:"success"},on:{click:t._handleSubmit}},[t._v("Submit")])],1)],2)]:t.editShow&&"MarkDown"===t.dialogName?[a("section",{staticClass:"meteor-adBlog-markDown meteor-blog-wrapper"},[a("VMdEditor",{attrs:{"left-toolbar":"h bold italic strikethrough quote | ul ol table hr | code link image | undo redo clear | tip","right-toolbar":"save | fullscreen",height:t.editorHeight+"px"},on:{save:t._handleMdSubmit},model:{value:t.blogRow.content,callback:function(e){t.$set(t.blogRow,"content",e)},expression:"blogRow.content"}})],1)]:t._e()],2)],1)],1)},i=[],o=(a("a15b"),a("d81d"),a("5530")),l=(a("b1cc"),a("f5921")),s={name:"AdUnit",components:{VMdEditor:l["a"].VMdCodeEditor},props:{title:{type:String,default:""},apiName:{type:String,default:""},actionList:{type:String,default:"edit,delete"},defaultData:{type:Object,default:null},defaultQuery:{type:Object,default:null},pageDataTran:{type:Function,default:function(t){return t}}},data:function(){return{tableData:[],tableSelection:[],tableLoading:!1,editShow:!1,fullscreen:!1,dialogName:"Model",pageOps:{total:1,pageSize:10,pageNo:1},formData:null,queryData:null,blogRow:{_id:"",content:""},editorHeight:400}},computed:{resizeIndex:function(){return this.$store.state.global.resizeIndex}},watch:{resizeIndex:function(){this.editorHeight=window.innerHeight-120}},created:function(){this.formData=Object(o["a"])({},this.defaultData),this.queryData=Object(o["a"])({},this.defaultQuery)},mounted:function(){this._handlePage()},methods:{_handlePage:function(){if(this.$api[this.apiName]){var t=this;this.tableLoading=!0,this.$api[this.apiName].page(Object(o["a"])({confModel:this.queryData},this.pageOps)).then((function(e){var a=e.data,n=a.success,i=a.result,o=a.total;n?(t.tableData=t.pageDataTran(i),t.pageOps.total=o):(t.tableData=[],t.pageOps.total=0,t.$message.error(e.data.msg)),t.tableLoading=!1})).catch((function(e){console.log(e),t.tableData=[],t.pageOps.total=0,t.$message.error(e.msg),t.tableLoading=!1}))}},_handleRefresh:function(){this.pageOps={total:1,pageSize:10,pageNo:1},this.editShow=!1,this.formData=Object(o["a"])({},this.defaultData),this.queryData=Object(o["a"])({},this.defaultQuery),this._handlePage()},_handleSizeChange:function(t){this.pageOps.pageNo=1,this.pageOps.pageSize=t,this._handlePage()},_handleCurrentChange:function(t){this.pageOps.pageNo=t,this._handlePage()},_handleEdit:function(t){this.formData=Object(o["a"])({},this.defaultData,{},t),this.dialogName="Model",this.fullscreen=!1,this.editShow=!0},_handleClose:function(){this.formData=Object(o["a"])({},this.defaultData),this.blogRow={_id:"",content:""}},_handleSubmit:function(){var t=this;t.$api[this.apiName].save(this.formData).then((function(e){e.data.success?(t.$message.success("保存成功"),t._handleRefresh()):t.$message.error(e.data.msg)}))},_handleMdEdit:function(t){var e=this;this.editorHeight=window.innerHeight-120,this.$api.blog.read(t._id).then((function(t){var a=t.data,n=a.success,i=a.result;n?(e.blogRow._id=i[0]._id,e.blogRow.content=i[0].content,e.dialogName="MarkDown",e.fullscreen=!0,e.editShow=!0):e.$message.error(t.data.msg)})).catch((function(t){e.$message.error(t.message)}))},_handleMdSubmit:function(t){var e=this;this.$api.blog.write({_id:this.blogRow._id,content:t}).then((function(t){t.data.success?e.$message.success(t.data.msg):e.$message.error(t.data.msg)})).catch((function(t){e.$message.error(t.message)}))},_handleDelete:function(t){var e=this,a=this;!t&&this.tableSelection.length<=0?this.$message.warning("请选择行"):this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var n=t||e.tableSelection.map((function(t){return t._id})).join(",");a.$api[e.apiName].delete(n).then((function(t){t.data.success?(a.$message.success("删除成功"),a._handleRefresh()):a.$message.error(t.data.msg)}))})).catch((function(){a.$message({type:"info",message:"已取消删除"})}))},_handleImport:function(){this.$message.info("_handleImport")},_handleExport:function(){this.$message.info("_handleExport")}}},r=s,c=(a("59b8"),a("d9cb"),a("2877")),d=Object(c["a"])(r,n,i,!1,null,"4ad9920a",null);e["a"]=d.exports}}]);
//# sourceMappingURL=chunk-ff19f0d0.01d2a652.js.map