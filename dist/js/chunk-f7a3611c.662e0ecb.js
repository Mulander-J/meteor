(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f7a3611c"],{"387a":function(e,t,a){"use strict";var l=a("9692"),n=a.n(l);n.a},"7d5f":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("AdUnit",{attrs:{title:"用户管理","api-name":"user","default-data":e.defaultData,"default-query":e.defaultQuery},scopedSlots:e._u([{key:"queryForm",fn:function(t){return[a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{attrs:{placeholder:"名称"},model:{value:t.queryData.name,callback:function(a){e.$set(t.queryData,"name",a)},expression:"props.queryData.name"}})],1)]}},{key:"modelForm",fn:function(t){return[a("el-row",[a("el-form-item",{attrs:{label:"头像"}},[a("el-avatar",[e._v(" user ")])],1)],1),a("el-row",[a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{attrs:{placeholder:"名称"},model:{value:t.formData.name,callback:function(a){e.$set(t.formData,"name",a)},expression:"props.formData.name"}})],1)],1),a("el-row",[a("el-form-item",{attrs:{label:"邮箱"}},[a("el-input",{attrs:{placeholder:"邮箱"},model:{value:t.formData.mail,callback:function(a){e.$set(t.formData,"mail",a)},expression:"props.formData.mail"}})],1)],1),a("el-row",[a("el-form-item",{attrs:{label:"密码"}},[a("el-input",{attrs:{type:"password","show-password":"",placeholder:"密码"},model:{value:t.formData.password,callback:function(a){e.$set(t.formData,"password",a)},expression:"props.formData.password"}})],1)],1),a("el-row",[a("el-form-item",{attrs:{label:"生辰"}},[a("el-date-picker",{staticStyle:{width:"180px"},attrs:{placeholder:"生辰"},model:{value:t.formData.birth,callback:function(a){e.$set(t.formData,"birth",a)},expression:"props.formData.birth"}})],1)],1),a("el-row",[a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{placeholder:"备注"},model:{value:t.formData.remark,callback:function(a){e.$set(t.formData,"remark",a)},expression:"props.formData.remark"}})],1)],1)]}}])},[a("template",{slot:"unitTable"},[a("el-table-column",{attrs:{prop:"mail",label:"邮箱"}}),a("el-table-column",{attrs:{prop:"head",label:"头像"}}),a("el-table-column",{attrs:{prop:"birth",label:"生辰"}}),a("el-table-column",{attrs:{prop:"remark",label:"备注"}})],1)],2)},n=[],o=a("f592"),i={name:"AdUser",components:{AdUnit:o["a"]},data:function(){return{defaultData:{name:"",mail:"",password:"",remark:"",birth:"",head:""},defaultQuery:{name:""}}}},s=i,r=(a("387a"),a("2877")),c=Object(r["a"])(s,l,n,!1,null,"ae18d532",null);t["default"]=c.exports},9692:function(e,t,a){},a15b:function(e,t,a){"use strict";var l=a("23e7"),n=a("44ad"),o=a("fc6a"),i=a("a640"),s=[].join,r=n!=Object,c=i("join",",");l({target:"Array",proto:!0,forced:r||!c},{join:function(e){return s.call(o(this),void 0===e?",":e)}})},b69c:function(e,t,a){},ddb4:function(e,t,a){"use strict";var l=a("b69c"),n=a.n(l);n.a},f592:function(e,t,a){"use strict";var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"meteor-curd-wrapper"},[a("el-divider",{attrs:{"content-position":"left"}},[e._v(e._s(e.title))]),a("el-collapse",{attrs:{accordion:""}},[a("el-collapse-item",{attrs:{title:"Search",name:"Search"}},[a("el-form",{attrs:{inline:!0,model:e.queryData,size:"small"}},[e._t("queryForm",null,{queryData:e.queryData}),a("el-form-item",{attrs:{label:"操作"}},[a("el-button",{on:{click:e._handlePage}},[e._v("查询")]),a("el-button",{on:{click:e._handleRefresh}},[e._v("重置")])],1)],2)],1),a("el-collapse-item",{attrs:{title:"More",name:"More"}},[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e._handleEdit(null)}}},[e._v("新建")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e._handleDelete(null)}}},[e._v("删除")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:e._handleRefresh}},[e._v("重置")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:e._handleImport}},[e._v("导入")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:e._handleExport}},[e._v("导出")])],1)],1),a("el-pagination",{staticStyle:{margin:"1rem 0"},attrs:{"current-page":e.pageOps.pageNo,"page-sizes":[10,50,100,500],"page-size":e.pageOps.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pageOps.total},on:{"size-change":e._handleSizeChange,"current-change":e._handleCurrentChange}}),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{stripe:"",data:e.tableData},on:{"selection-change":function(t){e.tableSelection=t}}},[a("el-table-column",{attrs:{fixed:"left",type:"selection",width:"50"}}),a("el-table-column",{attrs:{prop:"name",label:"名称",sortable:"",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return a("p",{staticClass:"curd-cell"},[e.actionList.indexOf("edit")>-1?a("span",{staticClass:"crud-edit",attrs:{title:"模型编辑"},on:{click:function(a){return e._handleEdit(t.row)}}},[a("i",{staticClass:"el-icon-edit"}),e._v(e._s(t.row.name))]):e._e(),e.actionList.indexOf("mdEdit")>-1?a("span",{staticClass:"crud-mdEdit",attrs:{title:"文章编辑"},on:{click:function(a){return e._handleMdEdit(t.row)}}},[a("i",{staticClass:"el-icon-edit-outline"})]):e._e(),e.actionList.indexOf("delete")>-1?a("span",{staticClass:"crud-delete",attrs:{title:"删除"},on:{click:function(a){return e._handleDelete(t.row._id)}}},[a("i",{staticClass:"el-icon-delete"})]):e._e()])}}])}),e._t("unitTable"),a("el-table-column",{attrs:{prop:"_updated",label:"最后更新",sortable:"","show-tooltip-when-overflow":""}}),a("el-table-column",{attrs:{prop:"_created",label:"创建时间",sortable:"","show-tooltip-when-overflow":""}})],2),a("el-dialog",{attrs:{title:e.dialogName,visible:e.editShow,fullscreen:e.fullscreen,width:"max-content"},on:{"update:visible":function(t){e.editShow=t},closed:e._handleClose}},[a("transition",{attrs:{name:"el-fade-in"}},[e.editShow&&"Model"===e.dialogName?[a("el-form",{attrs:{inline:"",model:e.formData,size:"small"}},[e._t("modelForm",null,{formData:e.formData}),a("div",{staticStyle:{"text-align":"right"}},[a("el-button",{attrs:{type:"success"},on:{click:e._handleSubmit}},[e._v("Submit")])],1)],2)]:e.editShow&&"MarkDown"===e.dialogName?[a("section",{staticClass:"meteor-adBlog-markDown meteor-blog-wrapper"},[a("mavon-editor",{on:{save:e._handleMdSubmit,helpToggle:function(t){return e._handleNoMeaning("虽点帮助，然并卵")}},model:{value:e.blogRow.content,callback:function(t){e.$set(e.blogRow,"content",t)},expression:"blogRow.content"}})],1)]:e._e()],2)],1)],1)},n=[],o=(a("a15b"),a("d81d"),a("5530")),i={name:"AdUnit",props:{title:{type:String,default:""},apiName:{type:String,default:""},actionList:{type:String,default:"edit,delete"},defaultData:{type:Object,default:null},defaultQuery:{type:Object,default:null},pageDataTran:{type:Function,default:function(e){return e}}},data:function(){return{tableData:[],tableSelection:[],tableLoading:!1,editShow:!1,fullscreen:!1,dialogName:"Model",pageOps:{total:1,pageSize:10,pageNo:1},formData:null,queryData:null,blogRow:{_id:"",content:""}}},created:function(){this.formData=Object(o["a"])({},this.defaultData),this.queryData=Object(o["a"])({},this.defaultQuery)},mounted:function(){this._handlePage()},methods:{_handlePage:function(){if(this.$api[this.apiName]){var e=this;this.tableLoading=!0,this.$api[this.apiName].page(Object(o["a"])({confModel:this.queryData},this.pageOps)).then((function(t){var a=t.data,l=a.success,n=a.result,o=a.total;l?(e.tableData=e.pageDataTran(n),e.pageOps.total=o):(e.tableData=[],e.pageOps.total=0,e.$message.error(t.data.msg)),e.tableLoading=!1})).catch((function(t){console.log(t),e.tableData=[],e.pageOps.total=0,e.$message.error(t.msg),e.tableLoading=!1}))}},_handleRefresh:function(){this.pageOps={total:1,pageSize:10,pageNo:1},this.editShow=!1,this.formData=Object(o["a"])({},this.defaultData),this.queryData=Object(o["a"])({},this.defaultQuery),this._handlePage()},_handleSizeChange:function(e){this.pageOps.pageNo=1,this.pageOps.pageSize=e,this._handlePage()},_handleCurrentChange:function(e){this.pageOps.pageNo=e,this._handlePage()},_handleEdit:function(e){this.formData=Object(o["a"])({},this.defaultData,{},e),this.dialogName="Model",this.fullscreen=!1,this.editShow=!0},_handleClose:function(){this.formData=Object(o["a"])({},this.defaultData),this.blogRow={_id:"",content:""}},_handleSubmit:function(){var e=this;e.$api[this.apiName].save(this.formData).then((function(t){t.data.success?(e.$message.success("保存成功"),e._handleRefresh()):e.$message.error(t.data.msg)}))},_handleMdEdit:function(e){var t=this;this.$api.blog.read(e._id).then((function(e){var a=e.data,l=a.success,n=a.result;l?(t.blogRow._id=n[0]._id,t.blogRow.content=n[0].content,t.dialogName="MarkDown",t.fullscreen=!0,t.editShow=!0):t.$message.error(e.data.msg)})).catch((function(e){t.$message.error(e.message)}))},_handleMdSubmit:function(e){var t=this;this.$api.blog.write({_id:this.blogRow._id,content:e}).then((function(e){e.data.success?t.$message.success(e.data.msg):t.$message.error(e.data.msg)})).catch((function(e){t.$message.error(e.message)}))},_handleNoMeaning:function(e){this.$message.info(e)},_handleDelete:function(e){var t=this,a=this;!e&&this.tableSelection.length<=0?this.$message.warning("请选择行"):this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var l=e||t.tableSelection.map((function(e){return e._id})).join(",");a.$api[t.apiName].delete(l).then((function(e){e.data.success?(a.$message.success("删除成功"),a._handleRefresh()):a.$message.error(e.data.msg)}))})).catch((function(){a.$message({type:"info",message:"已取消删除"})}))},_handleImport:function(){this.$message.info("_handleImport")},_handleExport:function(){this.$message.info("_handleExport")}}},s=i,r=(a("ddb4"),a("2877")),c=Object(r["a"])(s,l,n,!1,null,"22f9cede",null);t["a"]=c.exports}}]);
//# sourceMappingURL=chunk-f7a3611c.662e0ecb.js.map